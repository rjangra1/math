<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
		<title>Digital Photo Frame</title>
	</head>
	<style>
	</style>
	<body>
		<div id="clock" style="position:absolute;opacity:0"></div>
	</body>
	<script type="text/javascript" src="https://nc.local.com/clock.js"></script>
	<script>
		(function(){clock.init()})();
    
    fetch('https://nc.local.com/dummy.json')
    .then(resp=>resp.json())
    .then(data=> {
      console.log(data);
    });

    fetch('https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml')
    .then(resp=>resp)
    .then(data=> {
      console.log(data.text());
    });

    let val = [1,2];
    loadScript("https://nc.local.com/test.js", function() {
      console.log("Loaded")
      console.log("Existing values", val.length);
      reLoad();
      console.log("New values", val.length);
    });
    
    function loadScript(src, callback){
      if(document.getElementById('test')){
        document.getElementById('test').remove();
      }

      var script, scriptTag;
      script = document.createElement('script');
      script.id = "test";
      script.type = 'text/javascript';
      script.src = src;
      script.onload = script.onreadystatechange = function() {
        if (!this.readyState || this.readyState == 'complete' )
        {
          callback();
        }
      };
      scriptTag = document.getElementsByTagName('script')[0];
      scriptTag.parentNode.insertBefore(script, scriptTag);
    }

	</script>
</html>
